#!/bin/bash

# Set variables 
C4D_DMG_URL="https://mx-app-blob-prod.maxon.net/mx-package-production/installer/macos/maxon/cinema4d/releases/2025.3.3/Cinema4D_2025_2025.3.3_Mac.dmg"
DMG_NAME="Cinema4D_2025.3.3.dmg"
MOUNT_POINT="/Volumes/Cinema4D"

# Download the installer DMG
echo "Downloading Cinema 4D 2025.3.3 installer..."
curl -L "$C4D_DMG_URL" -o "$DMG_NAME"

# Mount the DMG file
echo "Mounting DMG..."
hdiutil attach "$DMG_NAME"

# Wait to ensure mounting is complete
sleep 3

# Run the silent installer inside the mounted volume
INSTALLER_NAME="Cinema 4D Installer.app"
sudo "$MOUNT_POINT/$INSTALLER_NAME/Contents/MacOS/installbuilder.sh" --mode unattended --unattendedmodeui none

# Unmount the DMG
hdiutil detach "$MOUNT_POINT"

# Remove the downloaded DMG
rm "$DMG_NAME"
